<script setup lang="ts">
import WowGearItemWrapper from './components/WowGearItemWrapper.vue'
import StatTotal from './components/StatTotal.vue'
import { Item, MainHand, Clothing } from './types/item-types'
import items from './data/item-sample';
import { ref, computed } from 'vue';

const equippedItems = ref([
    items.filter((item) => item.category == 'Head')[0],
    items.filter((item) => item.category == 'Chest')[0],
    items.filter((item) => item.category == 'Legs')[0],
    items.filter((item) => item.category == 'MainHand')[0]
] as Item[])

// Function to handle item selection from dropdown
const handleItemSelect = (index: number, newItem: Item) => {
  equippedItems.value[index] = newItem
}

const staminaTotal = computed(() => equippedItems.value.reduce((sum, item) => sum + (item.stamina || 0), 0));
const mainStatTotal = computed(() => equippedItems.value.reduce((sum, item) => sum + (item.mainStat || 0), 0));
const criticalStrikeTotal = computed(() => equippedItems.value.reduce((sum, item) => {
  if(item.secondaryStat1Name == 'Critical Strike')
    return sum + (item.secondaryStat1Value || 0)
  else if(item.secondaryStat2Name == 'Critical Strike')
    return sum + (item.secondaryStat2Value || 0)
  else
    return sum
}, 0));
const hasteTotal = computed(() => equippedItems.value.reduce((sum, item) => {
  if(item.secondaryStat1Name == 'Haste')
    return sum + (item.secondaryStat1Value || 0)
  else if(item.secondaryStat2Name == 'Haste')
    return sum + (item.secondaryStat2Value || 0)
  else
    return sum
}, 0));
const masteryTotal = computed(() => equippedItems.value.reduce((sum, item) => {
  if(item.secondaryStat1Name == 'Mastery')
    return sum + (item.secondaryStat1Value || 0)
  else if(item.secondaryStat2Name == 'Mastery')
    return sum + (item.secondaryStat2Value || 0)
  else
    return sum
}, 0));
</script>

<template>
  <main class="app-bg">
    <WowGearItemWrapper 
      v-for="(item, index) in equippedItems" 
      :key="item.itemId" 
      :item="item" 
      :onItemSelect="(newItem) => handleItemSelect(index, newItem)" 
    />
    <div class="stat-total-container">
      <StatTotal 
        :total="staminaTotal"
        name="Stamina" 
        inlineStyle="color: #27cc4e"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="filter-green"><g xmlns="http://www.w3.org/2000/svg"><path d="M32.105 26.297c-3.863-9.098-14.842-6.841-14.914 3.719-.04 5.799 3.176 8.808 14.937 16.919 10.688-7.172 14.945-11.183 14.905-16.982-.073-10.586-11.244-12.391-14.928-3.656"></path><path d="M57.355 42.637A27.25 27.25 0 0 0 59.501 32c0-3.685-.724-7.262-2.146-10.637V6.756H42.794a27.2 27.2 0 0 0-10.683-2.172c-3.702 0-7.295.733-10.683 2.172H6.867v14.606A27.3 27.3 0 0 0 4.722 32c0 3.687.724 7.264 2.145 10.637v14.607h14.561a27.2 27.2 0 0 0 10.683 2.173c3.701 0 7.294-.734 10.683-2.173h14.561zm-1.5-34.381v10.068a28 28 0 0 0-1.021-1.636c-.065-.098-.138-.19-.204-.286a27 27 0 0 0-1.188-1.591q-.194-.242-.393-.481a27 27 0 0 0-1.545-1.704 27 27 0 0 0-2.174-1.94 27 27 0 0 0-1.573-1.182c-.102-.071-.2-.147-.303-.217a28 28 0 0 0-1.642-1.031zm-47.488 0h10.042q-.842.488-1.643 1.032c-.102.069-.199.145-.3.215q-.811.565-1.577 1.185a27 27 0 0 0-2.173 1.939l-.017.018a27 27 0 0 0-1.919 2.164 27 27 0 0 0-1.19 1.593c-.066.096-.138.188-.203.285q-.538.799-1.021 1.636V8.256zm0 47.488V45.676q.483.84 1.022 1.638c.064.096.135.186.2.281a27 27 0 0 0 1.581 2.072c.494.587 1.002 1.16 1.543 1.702l.002.002a27 27 0 0 0 2.173 1.94q.767.621 1.579 1.187c.101.07.197.146.299.215q.802.543 1.642 1.031zm13.502.062A25.83 25.83 0 0 1 8.306 42.2 25.8 25.8 0 0 1 6.222 32c0-3.538.701-6.969 2.084-10.199A25.84 25.84 0 0 1 21.869 8.194a25.7 25.7 0 0 1 10.242-2.111c3.553 0 6.998.71 10.242 2.111A25.84 25.84 0 0 1 55.916 21.8 25.8 25.8 0 0 1 58.001 32c0 3.536-.701 6.968-2.085 10.199a25.83 25.83 0 0 1-13.563 13.606 25.7 25.7 0 0 1-10.242 2.111 25.7 25.7 0 0 1-10.242-2.11m33.986-.062H45.813q.842-.488 1.642-1.031c.103-.069.2-.146.302-.216a28 28 0 0 0 1.571-1.181q.245-.197.484-.398a28 28 0 0 0 1.69-1.541l.035-.038a27 27 0 0 0 1.907-2.152q.619-.769 1.182-1.583c.068-.098.141-.192.208-.292q.537-.797 1.02-1.635z"></path></g></svg>
      </StatTotal>
      <StatTotal 
        :total="mainStatTotal" 
        name="Agility" 
        inlineStyle="color: #ffd955"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="filter-yellow"><g xmlns="http://www.w3.org/2000/svg"><path d="M57.355 42.637A27.25 27.25 0 0 0 59.501 32c0-3.685-.724-7.262-2.146-10.637V6.756H42.794a27.2 27.2 0 0 0-10.683-2.172c-3.702 0-7.295.733-10.683 2.172H6.867v14.606A27.3 27.3 0 0 0 4.722 32c0 3.687.724 7.264 2.145 10.637v14.607h14.561a27.2 27.2 0 0 0 10.683 2.173c3.701 0 7.294-.734 10.683-2.173h14.561zm-1.5-34.381v10.068a28 28 0 0 0-1.021-1.636c-.065-.098-.138-.19-.204-.286a27 27 0 0 0-1.188-1.591q-.194-.242-.393-.481a27 27 0 0 0-1.545-1.704 27 27 0 0 0-2.174-1.94 27 27 0 0 0-1.573-1.182c-.102-.071-.2-.147-.303-.217a28 28 0 0 0-1.642-1.031zm-47.488 0h10.042q-.842.488-1.643 1.032c-.102.069-.199.145-.3.215q-.811.565-1.577 1.185a27 27 0 0 0-2.173 1.939l-.017.018a27 27 0 0 0-1.919 2.164 27 27 0 0 0-1.19 1.593c-.066.096-.138.188-.203.285q-.538.799-1.021 1.636V8.256zm0 47.488V45.676q.483.84 1.022 1.638c.064.096.135.186.2.281a27 27 0 0 0 1.581 2.072c.494.587 1.002 1.16 1.543 1.702l.002.002a27 27 0 0 0 2.173 1.94q.767.621 1.579 1.187c.101.07.197.146.299.215q.802.543 1.642 1.031zm13.502.062A25.83 25.83 0 0 1 8.306 42.2 25.8 25.8 0 0 1 6.222 32c0-3.538.701-6.969 2.084-10.199A25.84 25.84 0 0 1 21.869 8.194a25.7 25.7 0 0 1 10.242-2.111c3.553 0 6.998.71 10.242 2.111A25.84 25.84 0 0 1 55.916 21.8 25.8 25.8 0 0 1 58.001 32c0 3.536-.701 6.968-2.085 10.199a25.83 25.83 0 0 1-13.563 13.606 25.7 25.7 0 0 1-10.242 2.111 25.7 25.7 0 0 1-10.242-2.11m33.986-.062H45.813q.842-.488 1.642-1.031c.103-.069.2-.146.302-.216a28 28 0 0 0 1.571-1.181q.245-.197.484-.398a28 28 0 0 0 1.69-1.541l.035-.038a27 27 0 0 0 1.907-2.152q.619-.769 1.182-1.583c.068-.098.141-.192.208-.292q.537-.797 1.02-1.635z"></path><path d="M46.804 34.219c.179 3.128-6.415 10.197-7.82 4.58-.414-1.655.806-3.86 1.905-5.034.877-.937 3.26-2.676 4.614-2.312.515.139 1.057.698 1.159 1.126zm-8.215-1.839c-4.919-.719-1.104-7.935 1.369-9.446 2.494-1.524 5.354.637 4.918 3.456-.325 2.104-3.862 6.345-6.287 5.99m-1.392-13.102c1.996 2.27-2.691 9.045-5.34 8.312-4.923-1.363-.48-8.416 1.495-9.475.671-.36 1.341-.582 2.183-.27zm-15.139 9.51c-2.339-2.141.838-8.034 3.039-9.299 3.92-2.253 3.392 5.612 2.012 7.496-.858 1.172-2.537 2.562-3.989 2.618zm14.093 12.24c-.003.132.003.234.019.295.493 1.816 1.522 3.409-.036 5.133-1.427 1.579-4.028 1.509-5.731.345-1.638-1.12-2.027-3.49-3.449-4.853-1.705-1.634-3.554-1.703-5.701-2.009-2.349-.335-3.406-2.041-3.771-4.325-.376-2.355.885-3.062 3.061-3.379 1.45-.211 2.958-.352 4.245-1.081 2.406-1.364 2.797-3.668 5.762-1.705 1.754 1.161 3.994 2.469 5.233 4.215.733 1.033 1.435 1.805 1.283 2.982-.187 1.461-.875 2.806-.915 4.382"></path></g></svg>
      </StatTotal>
      <StatTotal 
        :total="criticalStrikeTotal" 
        name="Critical Strike" 
        inlineStyle="color: #e01c1c"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="filter-red"><g xmlns="http://www.w3.org/2000/svg"><path d="M57.355 42.637A27.25 27.25 0 0 0 59.501 32c0-3.685-.724-7.262-2.146-10.637V6.756H42.794a27.2 27.2 0 0 0-10.683-2.172c-3.702 0-7.295.733-10.683 2.172H6.867v14.606A27.3 27.3 0 0 0 4.722 32c0 3.687.724 7.264 2.145 10.637v14.607h14.561a27.2 27.2 0 0 0 10.683 2.173c3.701 0 7.294-.734 10.683-2.173h14.561zm-1.5-34.381v10.068a28 28 0 0 0-1.021-1.636c-.065-.098-.138-.19-.204-.286a27 27 0 0 0-1.188-1.591q-.194-.242-.393-.481a27 27 0 0 0-1.545-1.704 27 27 0 0 0-2.174-1.94 27 27 0 0 0-1.573-1.182c-.102-.071-.2-.147-.303-.217a28 28 0 0 0-1.642-1.031zm-47.488 0h10.042q-.842.488-1.643 1.032c-.102.069-.199.145-.3.215q-.811.565-1.577 1.185a27 27 0 0 0-2.173 1.939l-.017.018a27 27 0 0 0-1.919 2.164 27 27 0 0 0-1.19 1.593c-.066.096-.138.188-.203.285q-.538.799-1.021 1.636V8.256zm0 47.488V45.676q.483.84 1.022 1.638c.064.096.135.186.2.281a27 27 0 0 0 1.581 2.072c.494.587 1.002 1.16 1.543 1.702l.002.002a27 27 0 0 0 2.173 1.94q.767.621 1.579 1.187c.101.07.197.146.299.215q.802.543 1.642 1.031zm13.502.062A25.83 25.83 0 0 1 8.306 42.2 25.8 25.8 0 0 1 6.222 32c0-3.538.701-6.969 2.084-10.199A25.84 25.84 0 0 1 21.869 8.194a25.7 25.7 0 0 1 10.242-2.111c3.553 0 6.998.71 10.242 2.111A25.84 25.84 0 0 1 55.916 21.8 25.8 25.8 0 0 1 58.001 32c0 3.536-.701 6.968-2.085 10.199a25.83 25.83 0 0 1-13.563 13.606 25.7 25.7 0 0 1-10.242 2.111 25.7 25.7 0 0 1-10.242-2.11m33.986-.062H45.813q.842-.488 1.642-1.031c.103-.069.2-.146.302-.216a28 28 0 0 0 1.571-1.181q.245-.197.484-.398a28 28 0 0 0 1.69-1.541l.035-.038a27 27 0 0 0 1.907-2.152q.619-.769 1.182-1.583c.068-.098.141-.192.208-.292q.537-.797 1.02-1.635z"></path><path d="M32.111 29.689a2.989 2.989 0 1 0 0 5.977 2.989 2.989 0 0 0 0-5.977"></path><path d="m41.603 33.535 9.219-.857-9.219-.857a9.54 9.54 0 0 0-8.634-8.633l-.857-9.218-.857 9.218c-4.574.41-8.224 4.06-8.634 8.633l-9.219.857 9.219.857c.41 4.573 4.06 8.224 8.634 8.633l.857 9.218.857-9.218c4.573-.41 8.224-4.06 8.634-8.633m-8.527 7.472.215-2.313h-2.36l.215 2.313a8.4 8.4 0 0 1-7.365-7.364l2.313.215v-2.359l-2.313.215a8.4 8.4 0 0 1 7.365-7.364l-.215 2.313h2.36l-.215-2.313a8.4 8.4 0 0 1 7.365 7.364l-2.314-.215v2.359l2.314-.215a8.4 8.4 0 0 1-7.365 7.364"></path></g></svg>
      </StatTotal>
      <StatTotal 
        :total="hasteTotal"
        name="Haste" 
        inlineStyle="color: #0ed59b"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="filter-blue"><g xmlns="http://www.w3.org/2000/svg"><path d="M57.355 42.637A27.25 27.25 0 0 0 59.501 32c0-3.685-.724-7.262-2.146-10.637V6.756H42.794a27.2 27.2 0 0 0-10.683-2.172c-3.702 0-7.295.733-10.683 2.172H6.867v14.606A27.3 27.3 0 0 0 4.722 32c0 3.687.724 7.264 2.145 10.637v14.607h14.561a27.2 27.2 0 0 0 10.683 2.173c3.701 0 7.294-.734 10.683-2.173h14.561zm-1.5-34.381v10.068a28 28 0 0 0-1.021-1.636c-.065-.098-.138-.19-.204-.286a27 27 0 0 0-1.188-1.591q-.194-.242-.393-.481a27 27 0 0 0-1.545-1.704 27 27 0 0 0-2.174-1.94 27 27 0 0 0-1.573-1.182c-.102-.071-.2-.147-.303-.217a28 28 0 0 0-1.642-1.031zm-47.488 0h10.042q-.842.488-1.643 1.032c-.102.069-.199.145-.3.215q-.811.565-1.577 1.185a27 27 0 0 0-2.173 1.939l-.017.018a27 27 0 0 0-1.919 2.164 27 27 0 0 0-1.19 1.593c-.066.096-.138.188-.203.285q-.538.799-1.021 1.636V8.256zm0 47.488V45.676q.483.84 1.022 1.638c.064.096.135.186.2.281a27 27 0 0 0 1.581 2.072c.494.587 1.002 1.16 1.543 1.702l.002.002a27 27 0 0 0 2.173 1.94q.767.621 1.579 1.187c.101.07.197.146.299.215q.802.543 1.642 1.031zm13.502.062A25.83 25.83 0 0 1 8.306 42.2 25.8 25.8 0 0 1 6.222 32c0-3.538.701-6.969 2.084-10.199A25.84 25.84 0 0 1 21.869 8.194a25.7 25.7 0 0 1 10.242-2.111c3.553 0 6.998.71 10.242 2.111A25.84 25.84 0 0 1 55.916 21.8 25.8 25.8 0 0 1 58.001 32c0 3.536-.701 6.968-2.085 10.199a25.83 25.83 0 0 1-13.563 13.606 25.7 25.7 0 0 1-10.242 2.111 25.7 25.7 0 0 1-10.242-2.11m33.986-.062H45.813q.842-.488 1.642-1.031c.103-.069.2-.146.302-.216a28 28 0 0 0 1.571-1.181q.245-.197.484-.398a28 28 0 0 0 1.69-1.541l.035-.038a27 27 0 0 0 1.907-2.152q.619-.769 1.182-1.583c.068-.098.141-.192.208-.292q.537-.797 1.02-1.635z"></path><path d="M33.446 23.135c-.89 0-1.612.722-1.612 1.612v8.049l-4.079 4.078a1.611 1.611 0 1 0 2.28 2.28l4.551-4.55c.302-.302.472-.712.472-1.14v-8.716a1.61 1.61 0 0 0-1.612-1.613m-1.335-6.467c-8.509 0-15.431 6.92-15.431 15.427s6.922 15.426 15.431 15.426 15.431-6.92 15.431-15.426-6.922-15.427-15.431-15.427M19.179 38.606a14.3 14.3 0 0 1-1.545-6.511c0-7.981 6.495-14.473 14.477-14.473v2.097c-6.826 0-12.379 5.552-12.379 12.376 0 1.959.444 3.831 1.32 5.566zm12.932 4.91c-6.3 0-11.426-5.124-11.426-11.422s5.126-11.422 11.426-11.422 11.426 5.124 11.426 11.422-5.126 11.422-11.426 11.422"></path></g></svg>
    </StatTotal>

    <StatTotal 
        :total="masteryTotal" 
        name="Mastery" 
        inlineStyle="color: #9256ff"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" class="filter-purple"><g xmlns="http://www.w3.org/2000/svg"><path d="M57.355 42.637A27.25 27.25 0 0 0 59.501 32c0-3.685-.724-7.262-2.146-10.637V6.756H42.794a27.2 27.2 0 0 0-10.683-2.172c-3.702 0-7.295.733-10.683 2.172H6.867v14.606A27.3 27.3 0 0 0 4.722 32c0 3.687.724 7.264 2.145 10.637v14.607h14.561a27.2 27.2 0 0 0 10.683 2.173c3.701 0 7.294-.734 10.683-2.173h14.561zm-1.5-34.381v10.068a28 28 0 0 0-1.021-1.636c-.065-.098-.138-.19-.204-.286a27 27 0 0 0-1.188-1.591q-.194-.242-.393-.481a27 27 0 0 0-1.545-1.704 27 27 0 0 0-2.174-1.94 27 27 0 0 0-1.573-1.182c-.102-.071-.2-.147-.303-.217a28 28 0 0 0-1.642-1.031zm-47.488 0h10.042q-.842.488-1.643 1.032c-.102.069-.199.145-.3.215q-.811.565-1.577 1.185a27 27 0 0 0-2.173 1.939l-.017.018a27 27 0 0 0-1.919 2.164 27 27 0 0 0-1.19 1.593c-.066.096-.138.188-.203.285q-.538.799-1.021 1.636V8.256zm0 47.488V45.676q.483.84 1.022 1.638c.064.096.135.186.2.281a27 27 0 0 0 1.581 2.072c.494.587 1.002 1.16 1.543 1.702l.002.002a27 27 0 0 0 2.173 1.94q.767.621 1.579 1.187c.101.07.197.146.299.215q.802.543 1.642 1.031zm13.502.062A25.83 25.83 0 0 1 8.306 42.2 25.8 25.8 0 0 1 6.222 32c0-3.538.701-6.969 2.084-10.199A25.84 25.84 0 0 1 21.869 8.194a25.7 25.7 0 0 1 10.242-2.111c3.553 0 6.998.71 10.242 2.111A25.84 25.84 0 0 1 55.916 21.8 25.8 25.8 0 0 1 58.001 32c0 3.536-.701 6.968-2.085 10.199a25.83 25.83 0 0 1-13.563 13.606 25.7 25.7 0 0 1-10.242 2.111 25.7 25.7 0 0 1-10.242-2.11m33.986-.062H45.813q.842-.488 1.642-1.031c.103-.069.2-.146.302-.216a28 28 0 0 0 1.571-1.181q.245-.197.484-.398a28 28 0 0 0 1.69-1.541l.035-.038a27 27 0 0 0 1.907-2.152q.619-.769 1.182-1.583c.068-.098.141-.192.208-.292q.537-.797 1.02-1.635z"></path><path d="M46.934 26.287c-1.107 0-2.004.885-2.004 1.976 0 .31.079.599.208.861l-6.74 4.691-.387-8.422c1.064-.048 1.914-.906 1.914-1.967 0-1.091-.898-1.976-2.005-1.976s-2.004.885-2.004 1.976c0 .732.408 1.364 1.008 1.705l-4.812 8.237-4.812-8.237a1.96 1.96 0 0 0 1.008-1.705c0-1.091-.897-1.976-2.004-1.976s-2.004.885-2.004 1.976c0 1.061.85 1.919 1.914 1.967l-.387 8.422-6.74-4.691c.129-.261.208-.551.208-.861 0-1.092-.897-1.976-2.005-1.976s-2.004.885-2.004 1.976.897 1.976 2.004 1.976c.298 0 .578-.068.832-.183l5.048 13.236c2.178-.849 5.377-1.385 8.943-1.385s6.764.536 8.942 1.385l5.048-13.236c.254.115.534.183.832.183 1.107 0 2.005-.885 2.005-1.976-.001-1.091-.899-1.976-2.006-1.976"></path></g></svg>
      </StatTotal>

    </div>
  </main>
</template>

<style>
#app {
  padding: 0 !important;
  margin: 0 !important;
  min-height: 100vh;
  width: 100vw;
  background: url('@/assets/Momo.jpg') no-repeat center center fixed;
  background-size: cover;
}

.app-bg {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  gap: 20px;
  min-height: 100vh;
}

.filter-green{
  filter: invert(60%) sepia(83%) saturate(408%) hue-rotate(82deg) brightness(89%) contrast(101%);
}

.filter-yellow{
  filter: invert(90%) sepia(98%) saturate(4947%) hue-rotate(315deg) brightness(108%) contrast(105%);
}

.filter-red{
  filter: invert(25%) sepia(66%) saturate(5012%) hue-rotate(351deg) brightness(90%) contrast(96%);
}

.filter-blue {
  filter: invert(59%) sepia(72%) saturate(500%) hue-rotate(112deg) brightness(97%) contrast(93%);
}

.filter-purple {
  filter: invert(45%) sepia(40%) saturate(7157%) hue-rotate(241deg) brightness(100%) contrast(101%);
}

.stat-total-container {
  display: block;
  position: absolute;
  bottom: 0px;
  left: 0px;
  background-color: rgba(0, 0, 0, 0.5);
  width: 1000px;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 200px;
}
</style>
